(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5819:(e,t,s)=>{Promise.resolve().then(s.bind(s,8307))},8307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ev});var r=s(7437),a=s(2265),n=s(1538),l=s(3027),i=s(4839),d=s(6164);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.m6)((0,i.W)(t))}let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/80",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/85",outline:"border border-primary/40 text-foreground bg-background shadow-sm hover:bg-primary/5",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",accent:"bg-accent text-accent-foreground shadow-sm hover:bg-accent/80",ghost:"text-foreground hover:bg-primary/10",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:i=!1,...d}=e,m=i?n.g7:"button";return(0,r.jsx)(m,{className:o(c({variant:a,size:l,className:s})),ref:t,...d})});m.displayName="Button";var u=s(9385);let f=u.fC,x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(u.aV,{ref:t,className:o("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a})});x.displayName=u.aV.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(u.xz,{ref:t,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a})});h.displayName=u.xz.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(u.VY,{ref:t,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});p.displayName=u.VY.displayName;let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:o("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});g.displayName="Textarea";let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("rounded-xl border bg-card text-card-foreground shadow",s),...a})});j.displayName="Card",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("flex flex-col space-y-1.5 p-6",s),...a})}).displayName="CardHeader",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("font-semibold leading-none tracking-tight",s),...a})}).displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let b=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("p-6 pt-0",s),...a})});b.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:o("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";var v=s(8364);let y=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(v.f,{ref:t,className:o(y(),s),...a})});N.displayName=v.f.displayName;var w=s(9893),S=s(2421),C=s(4392),k=s(2468);let R=w.fC;w.ZA;let U=w.B4,P=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(w.xz,{ref:t,className:o("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[a,(0,r.jsx)(w.JO,{asChild:!0,children:(0,r.jsx)(S.Z,{className:"h-4 w-4 opacity-50"})})]})});P.displayName=w.xz.displayName;let L=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(w.u_,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(C.Z,{className:"h-4 w-4"})})});L.displayName=w.u_.displayName;let A=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(w.$G,{ref:t,className:o("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(S.Z,{className:"h-4 w-4"})})});A.displayName=w.$G.displayName;let E=a.forwardRef((e,t)=>{let{className:s,children:a,position:n="popper",...l}=e;return(0,r.jsx)(w.h_,{children:(0,r.jsxs)(w.VY,{ref:t,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...l,children:[(0,r.jsx)(L,{}),(0,r.jsx)(w.l_,{className:o("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(A,{})]})})});E.displayName=w.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(w.__,{ref:t,className:o("px-2 py-1.5 text-sm font-semibold",s),...a})}).displayName=w.__.displayName;let Z=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(w.ck,{ref:t,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(w.wU,{children:(0,r.jsx)(k.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(w.eT,{children:a})]})});Z.displayName=w.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(w.Z0,{ref:t,className:o("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=w.Z0.displayName;var _=s(7071);let z=_.zt,D=_.fC,M=_.xz,O=a.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,r.jsx)(_.h_,{children:(0,r.jsx)(_.VY,{ref:t,sideOffset:a,className:o("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});O.displayName=_.VY.displayName;var V=s(9646);let I=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.fC,{className:o("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,r.jsx)(V.bU,{className:o("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});I.displayName=V.fC.displayName;var T=s(8484);let F=a.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:n=!0,...l}=e;return(0,r.jsx)(T.f,{ref:t,decorative:n,orientation:a,className:o("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...l})});F.displayName=T.f.displayName;let q=(0,l.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",accent:"border-transparent bg-accent text-accent-foreground hover:bg-accent/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function B(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:o(q({variant:s}),t),...a})}var G=s(529),Y=s(2699),W=s(8296),K=s(7151),$=s(6044),Q=s(3907),H=s(6706),J=s(5430),X=s(7746),ee=s(6884),et=s(7164);let es=["Sequence","Use Case","Class","Object","Activity","Component","Deployment","State","Timing"],er=es[0],ea={Sequence:'@startuml\nactor User\nparticipant "Web App" as A\nparticipant "API Server" as B\ndatabase "Database" as C\n\nUser -> A: Login Request\nA -> B: Authenticate\nB -> C: Query User\nC --> B: Return User Data\nB --> A: Authentication Response\nA --> User: Login Result\n@enduml',"Use Case":"@startuml\nleft to right direction\nactor User\nactor System\nUser --> (Submit Request)\n(Submit Request) --> System\nSystem --> (Process Request)\nSystem --> (Send Response)\n@enduml",Class:'@startuml\nclass User {\n-String username\n-String email\n+login()\n+logout()\n}\n\nclass Post {\n-String title\n-String content\n-Date createdAt\n+publish()\n}\n\nUser "1" -- "many" Post : creates\n@enduml',Object:'@startuml\nobject "Order #42" as Order\nobject "Customer" as Customer\nobject "Payment" as Payment\n\nCustomer : name = "Alice"\nOrder : status = "Pending"\nPayment : method = "Credit Card"\n\nCustomer --> Order : places\nOrder --> Payment : uses\n@enduml',Activity:"@startuml\n|User|\nstart\n:Open application;\n:Enter credentials;\nif (Credentials valid?) then (yes)\n  :Show dashboard;\nelse (no)\n  :Show error message;\nendif\n:Proceed with task;\nstop\n@enduml",Component:"@startuml\n[Web Client] --> [REST API]\n[REST API] --> [Service Layer]\n[Service Layer] --> [Database]\n[Service Layer] --> [Queue]\n@enduml",Deployment:'@startuml\nnode "Client" {\n  component "Web App"\n}\n\nnode "Server" {\n  component "API"\n  database "DB"\n}\n\n"Web App" --> "API"\n"API" --> "DB"\n@enduml',State:"@startuml\n[*] --> Idle\nIdle --> Processing : start\nProcessing --> Idle : success\nProcessing --> Error : failure\nError --> Idle : reset\n@enduml",Timing:'@startuml\nrobust "Sensor" as Sensor\nconcise "Controller" as Controller\n\nSensor is Idle\nController is Idle\n@0\nSensor -> Controller: heartbeat\n@100\nController -> Sensor: ack\n@enduml'};var en=s(8064);let el=(0,en.createServerReference)("78de46904a7d86dbbba742af336d3f3a19cbbef956",en.callServer,void 0,en.findSourceMapURL,"generateUMLAction");var ei=s(6648),ed=s(4828),eo=s(2616),ec=s(6753),em=s(1004),eu=s.n(em),ef=s(2213);let ex=e=>{let{umlCode:t,isGenerating:s,imageUrl:n,onImageGenerate:l}=e,[i,d]=(0,a.useState)("");(0,a.useEffect)(()=>{!async function(){if(!t||n)return;let e="http://138.26.48.104:8080/svg/"+eu().encode(t);d(e),null==l||l(e)}()},[n,l,t]);let o=n||i;try{return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center h-full max-h-full bg-muted/30 rounded-md p-4 cursor-grab w-full",children:s?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)(H.Z,{className:"animate-spin h-8 w-8"}),(0,r.jsx)("p",{children:"Generating diagram..."})]}):(0,r.jsx)(ef.d$,{smooth:!0,initialScale:.8,minScale:.2,maxScale:4,centerOnInit:!0,children:e=>{let{zoomIn:t,zoomOut:s,resetTransform:a,centerView:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-2 self-end",children:[(0,r.jsx)("button",{onClick:()=>t(),className:"p-2 bg-secondary text-secondary-foreground rounded-md",children:(0,r.jsx)(ed.Z,{})}),(0,r.jsx)("button",{onClick:()=>s(),className:"p-2 bg-secondary text-secondary-foreground rounded-md",children:(0,r.jsx)(eo.Z,{})}),(0,r.jsx)("button",{onClick:()=>{a(),n(.8)},className:"p-2 bg-secondary text-secondary-foreground rounded-md",children:(0,r.jsx)(ec.Z,{})})]}),(0,r.jsx)(ef.Uv,{wrapperClass:"w-full h-full",children:(0,r.jsx)("div",{className:"w-full h-full max-h-[60vh] overflow-hidden flex items-center justify-center",children:o?(0,r.jsx)(ei.default,{src:o,alt:"UML Diagram Preview",width:1600,height:1200,className:"w-full h-full object-contain",sizes:"100vw",priority:!0,unoptimized:!0}):(0,r.jsx)("p",{children:"No diagram available"})})})]})}})})}catch(e){return console.error("Error rendering UML:",e),(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-muted/30 rounded-md p-4",children:(0,r.jsx)("div",{className:"text-center text-muted-foreground",children:(0,r.jsx)("p",{children:"Error generating diagram"})})})}},eh=()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,8)),ep=e=>e.slice(-10).map(e=>{let t="user"===e.role?"User":"assistant"===e.role?"Assistant":"error"===e.role?"Error":"System";return"".concat(t,": ").concat(e.content)}).join("\n"),eg=e=>{if(!e)return null;let t=e.match(/@startuml[\s\S]*@enduml/i);return t?t[0]:null},ej=e=>{let{template:t,diagramType:s,description:r,theme:a}=e,n=t;return(n=a?n.replace(/\{%\s*if\s+theme\s*%\}/g,"").replace(/\{%\s*endif\s*%\}/g,"").replace(/\{\{\s*theme\s*\}\}/g,a):n.replace(/\{%\s*if\s+theme\s*%\}[\s\S]*?\{%\s*endif\s*%\}/g,"")).replace(/\{\{\s*diagram_type\s*\}\}/g,s).replace(/\{\{\s*description\s*\}\}/g,r).trim()},eb=e=>{let{diagramType:t,currentCode:s,chatSummary:r,latestRequest:a,promptTemplate:n}=e,l=["Latest user request:\n".concat(a),s?"Existing PlantUML (reuse and refine rather than restart):\n".concat(s):"No diagram has been created yet. Create a fresh PlantUML diagram.",r?"Recent conversation:\n".concat(r):"","Respond with PlantUML only between @startuml and @enduml."].filter(Boolean).join("\n\n");return n?ej({template:n,diagramType:t,description:l}):["You are an expert UML assistant following the prompty template rules.","Diagram Type: ".concat(t),"Generate valid PlantUML enclosed between @startuml and @enduml with concise, professional notation. No extra prose or markdown fences.",l].join("\n\n")};function ev(){var e;let[t,s]=(0,a.useState)(""),[n,l]=(0,a.useState)([]),[i,d]=(0,a.useState)(er),[o,c]=(0,a.useState)(null!==(e=ea[er])&&void 0!==e?e:""),[u,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[L,A]=(0,a.useState)("split"),_=(0,a.useRef)(null),[V,T]=(0,a.useState)(""),[q,en]=(0,a.useState)(!1),[ei,ed]=(0,a.useState)(null),[eo,ec]=(0,a.useState)(null);(0,a.useEffect)(()=>{S?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[S]),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/prompts/uml");if(!e.ok)throw Error("Failed to load prompt template: ".concat(e.status));let t=await e.json();t.template&&ec(t.template)}catch(e){console.error("Unable to load UML prompt template",e),ec(null)}})()},[]);let em=async()=>{let e=t.trim();if(!e)return;let r=[...n,{id:eh(),role:"user",content:e}];l(r),s("");try{v(!0),ed(null),T("");let t=ep(r),s=eb({diagramType:i,currentCode:o,chatSummary:t,latestRequest:e,promptTemplate:eo}),n=await el(s,i);if("ok"===n.status){var a,d;let e=null!==(d=null!==(a=eg(n.plantuml_code))&&void 0!==a?a:n.plantuml_code)&&void 0!==d?d:o;e!==o&&c(e),n.image_base64?T("data:image/png;base64,".concat(n.image_base64)):n.image_url?T(n.image_url):T(""),w(!1),l(e=>[...e,{id:eh(),role:"assistant",content:n.message||"Diagram updated. Share your next change request!"}]),ed(null)}else{let e=n.message||"Failed to generate UML diagram";ed(e),w(!1),l(t=>[...t,{id:eh(),role:"error",content:e}])}}catch(t){console.error(t);let e=t instanceof Error&&t.message||"Something went wrong/Out of credits";ed(e),w(!1),l(t=>[...t,{id:eh(),role:"error",content:e}])}finally{v(!1)}},eu=()=>ei?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-destructive",children:ei}):(0,r.jsx)(ex,{umlCode:o,isGenerating:ev,imageUrl:V||void 0,onImageGenerate:ej}),ef=async()=>{if(V)try{let e=await fetch(V);if(!e.ok)throw Error("Failed to fetch the SVG content");let t=await e.blob(),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download="uml.svg",document.body.appendChild(r),r.click(),URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){console.error("Error downloading the SVG:",e)}},ej=(0,a.useCallback)(e=>{T(e),w(!1)},[]),ev=u||y;return(0,r.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,r.jsx)("header",{className:"border-b",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(G.Z,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Model Foundry"}),(0,r.jsx)(B,{variant:"accent",className:"ml-2 uppercase tracking-wide",children:"Alpha"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(z,{children:(0,r.jsxs)(D,{children:[(0,r.jsx)(M,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I,{checked:S,onCheckedChange:C,id:"dark-mode"}),(0,r.jsx)(N,{htmlFor:"dark-mode",className:"cursor-pointer",children:S?(0,r.jsx)(Y.Z,{className:"h-4 w-4"}):(0,r.jsx)(W.Z,{className:"h-4 w-4"})})]})}),(0,r.jsx)(O,{children:(0,r.jsx)("p",{children:"Toggle dark mode"})})]})})})]})}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(j,{children:(0,r.jsxs)(b,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(K.Z,{className:"h-5 w-5 text-primary"}),(0,r.jsx)("h2",{className:"text-base font-semibold",children:"Tips"})]}),(0,r.jsxs)("ul",{className:"text-sm text-muted-foreground grid gap-1 md:grid-cols-2 md:gap-x-4 md:gap-y-1",children:[(0,r.jsx)("li",{children:"• Switch templates to explore available UML diagram types"}),(0,r.jsx)("li",{children:"• Select the diagram you need"}),(0,r.jsx)("li",{children:"• When revising, refer to existing elements"}),(0,r.jsx)("li",{children:"• Fine-tune the PlantUML code directly in the editor"}),(0,r.jsx)("li",{children:"• Refresh the page to wipe memory "}),(0,r.jsx)("li",{children:"• Save prompts elsewhere in early adoption"})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1.3fr_2.7fr] gap-6",children:[(0,r.jsx)("div",{children:(0,r.jsx)(j,{children:(0,r.jsx)(b,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-2 flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"h-4 w-4 text-primary"}),"Diagram Types"]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)(R,{value:i,onValueChange:e=>{d(e);let t=ea[e],s=ea[i];t&&(0===o.trim().length||o===s)&&c(t),T(""),w(!0)},children:[(0,r.jsx)(P,{children:(0,r.jsx)(U,{placeholder:"Select template"})}),(0,r.jsx)(E,{children:es.map(e=>(0,r.jsxs)(Z,{value:e,children:[e," Diagram"]},e))})]})})]}),(0,r.jsx)(F,{}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-2 flex items-center gap-2",children:[(0,r.jsx)(Q.Z,{className:"h-4 w-4 text-primary"}),"UML Chat Assistant"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"border rounded-md bg-muted/40 p-3 h-56 overflow-y-auto",children:0===n.length?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No messages yet. Describe a system or ask for a change to get started."}):n.map(e=>{let t="user"===e.role?"You":"assistant"===e.role?"Assistant":"system"===e.role?"System":"Error",s="user"===e.role?"text-primary":"assistant"===e.role?"text-emerald-500":"error"===e.role?"text-destructive":"text-muted-foreground";return(0,r.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase ".concat(s),children:t}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})]},e.id)})}),(0,r.jsx)(g,{placeholder:"Ask for a diagram or request a change (Shift+Enter for new line)...",value:t,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),em())},className:"min-h-[100px]"}),(0,r.jsx)(m,{onClick:em,className:"w-full",disabled:u||!t.trim(),children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Working..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.Z,{className:"mr-2 h-4 w-4"}),"Send Request"]})})]})]})]})})})}),(0,r.jsx)("div",{children:(0,r.jsxs)(f,{value:L,onValueChange:A,className:"w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)(x,{children:[(0,r.jsxs)(h,{value:"editor",className:"flex items-center gap-2",children:[(0,r.jsx)(X.Z,{className:"h-4 w-4"}),"Editor"]}),(0,r.jsxs)(h,{value:"preview",className:"flex items-center gap-2",children:[(0,r.jsx)(G.Z,{className:"h-4 w-4"}),"Preview"]}),(0,r.jsxs)(h,{value:"split",className:"flex items-center gap-2",children:[(0,r.jsx)($.Z,{className:"h-4 w-4"}),"Split View"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(m,{onClick:()=>{o.trim()&&(ed(null),w(!0),T(""))},variant:"default",size:"sm",disabled:!o.trim()||ev,children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{className:"h-4 w-4 mr-2"}),"Update Diagram"]})}),(0,r.jsxs)(m,{onClick:()=>{en(!0),navigator.clipboard.writeText(o),setTimeout(()=>{en(!1)},2e3)},variant:"outline",size:"sm",children:[q?(0,r.jsx)(k.Z,{className:"h-4 w-4 mr-2"}):(0,r.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Copy"]}),(0,r.jsxs)(m,{onClick:ef,variant:"outline",size:"sm",children:[(0,r.jsx)(et.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,r.jsx)(p,{value:"editor",className:"mt-0",children:(0,r.jsx)(j,{children:(0,r.jsx)(b,{className:"p-0",children:(0,r.jsxs)("div",{className:"border rounded-md",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-2 border-b flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"PlantUML Code"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Syntax: PlantUML"})]}),(0,r.jsx)("div",{ref:_,className:"p-4 font-mono text-sm h-[70vh] overflow-auto",children:(0,r.jsx)(g,{value:o,onChange:e=>c(e.target.value),className:"font-mono h-full border-0 focus-visible:ring-0 resize-none"})})]})})})}),(0,r.jsx)(p,{value:"preview",className:"mt-0",children:(0,r.jsx)(j,{children:(0,r.jsx)(b,{className:"p-0",children:(0,r.jsxs)("div",{className:"border rounded-md",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-2 border-b flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Diagram Preview"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:ev?"Generating...":"Ready"})]}),(0,r.jsx)("div",{className:"h-[70vh] overflow-hidden",children:eu()})]})})})}),(0,r.jsx)(p,{value:"split",className:"mt-0",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(j,{children:(0,r.jsx)(b,{className:"p-0",children:(0,r.jsxs)("div",{className:"border rounded-md",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-2 border-b flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"PlantUML Code"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Syntax: PlantUML"})]}),(0,r.jsx)("div",{className:"p-4 font-mono text-sm h-[70vh] overflow-auto",children:(0,r.jsx)(g,{value:o,onChange:e=>c(e.target.value),className:"font-mono h-full border-0 focus-visible:ring-0 resize-none"})})]})})}),(0,r.jsx)(j,{children:(0,r.jsx)(b,{className:"p-0",children:(0,r.jsxs)("div",{className:"border rounded-md",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-2 border-b flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Diagram Preview"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:ev?"Generating...":"Ready"})]}),(0,r.jsx)("div",{className:"h-[70vh] border overflow-hidden",children:eu()})]})})})]})})]})})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[971,130,215,744],()=>t(5819)),_N_E=e.O()}]);